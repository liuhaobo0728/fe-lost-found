{"remainingRequest":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuhaobo/Desktop/fe-lost-found/src/views/user/user-center.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuhaobo/Desktop/fe-lost-found/src/views/user/user-center.vue","mtime":1557389346879},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data() {\n    return {\n      userinfow: {\n        userEmail: \"\",\n        passWord: \"\"\n      },\n      user: {\n        itemImg: \"\",\n        extraInfo: \"\",\n        userIcon: \"\",\n        userId: \"\",\n        userNick: \"\",\n        userPhone: \"\",\n        userScore: 0\n      },\n      imageUrl: \"\",\n      userinfo: true,\n      forshow: false,\n      filelist: {\n        file: null,\n        userId: 0\n      }\n    };\n  },\n  mounted() {\n    this.user.userId = this.$store.getters.userid;\n  },\n  methods: {\n    previewFile() {\n      this.filelist.file = this.$refs.file.files[0];\n      if (this.filelist.file.size > 1024 * 1024 * 2) {\n        alert(\"图片大小不能超过 2MB!\");\n        return false;\n      }\n      // 创建url\n      this.user.itemImg = window.URL.createObjectURL(this.filelist.file);\n    },\n    async sendfood() {\n      await this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          // this.$notify({\n          //   title: \"成功\",\n          //   showClose: false,\n          //   message: \"用户信息修改成功\"\n          // });\n          // this.$router.push({\n          //   path: \"/\"\n          // });\n        }\n      });\n      const formdata = new FormData();\n      formdata.append(\"file\", this.filelist.file);\n      await this.$api.api.uplodeItemImg(formdata).then(res => {\n        if (res.data.state === 0) {\n          alert(\"修改成功\");\n        }\n      });\n      this.$router.push({\n        path: \"/\"\n      });\n    },\n    forshowa() {\n      this.forshow = !this.forshow;\n      this.userinfo = !this.userinfo;\n    },\n    infoshow() {\n      this.forshow = !this.forshow;\n\n      this.userinfo = !this.userinfo;\n    },\n    login() {\n      // this.$store.dispatch('GoLogin',this.user)\n      // .then((res) => {\n      //     // if(this.checked = true) {\n      //     //     localStorage.user = JSON.stringify(this.user)\n      //     // }\n      //     // if(res === undefined){\n      //     //     this.$router.push({path:'/userinfo'})\n      //     // }\n      //     console.log(\"a\" + res)\n      //     this.$router.push({path:'/'})\n      // })\n      this.$api.api.resetPassWord(this.userinfow).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"找回密码成功\"\n          });\n          this.$router.push({\n            path: \"/touser/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    register() {\n      this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"用户信息填写成功\"\n          });\n          this.$router.push({\n            path: \"/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    }\n  }\n};\n",{"version":3,"sources":["user-center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"user-center.vue","sourceRoot":"src/views/user","sourcesContent":["<template>\n  <div class=\"userinfo\">\n    <div class=\"btn\">\n      <el-button type=\"text\" @click=\"infoshow\">信息修改</el-button>\n      <el-button type=\"text\" @click=\"forshowa\">重置密码</el-button>\n    </div>\n\n    <div class=\"form\" v-show=\"userinfo\">\n      <p class=\"register-title\">信息修改</p>\n      <div class=\"imgfile\">\n        <h3 class=\"filetitle\">请上传头像：</h3>\n        <input type=\"file\" @change=\"previewFile()\" ref=\"file\">\n      </div>\n      <div class=\"imageurl\">\n        <img\n          v-if=\"user.itemImg\"\n          :src=\"user.itemImg\"\n          width=\"200\"\n          height=\"200\"\n          alt=\"Image preview...\"\n        >\n      </div>\n      <br>\n      <span class=\"title-name\">请输入用户昵称</span>\n      <el-input v-model=\"user.userNick\" placeholder=\"请输入用户昵称\"/>\n      <span class=\"title-name\">请输入手机号</span>\n\n      <el-input v-model=\"user.userPhone\" placeholder=\"请输入手机号\"/>\n      <el-button class=\"btn-register\" type=\"success\" @click=\"sendfood\">保存</el-button>\n    </div>\n    <div class=\"form\" v-show=\"forshow\">\n      <p class=\"login-title\">重置密码</p>\n      <el-input v-model=\"userinfow.userEmail\" placeholder=\"请输入邮箱\"/>\n      <el-input v-model=\"userinfow.passWord\" type=\"password\" placeholder=\"请输入密码\"/>\n      <el-button class=\"btn-login\" type=\"success\" @click=\"login\">重置</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      userinfow: {\n        userEmail: \"\",\n        passWord: \"\"\n      },\n      user: {\n        itemImg: \"\",\n        extraInfo: \"\",\n        userIcon: \"\",\n        userId: \"\",\n        userNick: \"\",\n        userPhone: \"\",\n        userScore: 0\n      },\n      imageUrl: \"\",\n      userinfo: true,\n      forshow: false,\n      filelist: {\n        file: null,\n        userId: 0\n      }\n    };\n  },\n  mounted() {\n    this.user.userId = this.$store.getters.userid;\n  },\n  methods: {\n    previewFile() {\n      this.filelist.file = this.$refs.file.files[0];\n      if (this.filelist.file.size > 1024 * 1024 * 2) {\n        alert(\"图片大小不能超过 2MB!\");\n        return false;\n      }\n      // 创建url\n      this.user.itemImg = window.URL.createObjectURL(this.filelist.file);\n    },\n    async sendfood() {\n      await this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          // this.$notify({\n          //   title: \"成功\",\n          //   showClose: false,\n          //   message: \"用户信息修改成功\"\n          // });\n          // this.$router.push({\n          //   path: \"/\"\n          // });\n        }\n      });\n      const formdata = new FormData();\n      formdata.append(\"file\", this.filelist.file);\n      await this.$api.api.uplodeItemImg(formdata).then(res => {\n        if (res.data.state === 0) {\n          alert(\"修改成功\");\n        }\n      });\n      this.$router.push({\n        path: \"/\"\n      });\n    },\n    forshowa() {\n      this.forshow = !this.forshow;\n      this.userinfo = !this.userinfo;\n    },\n    infoshow() {\n      this.forshow = !this.forshow;\n\n      this.userinfo = !this.userinfo;\n    },\n    login() {\n      // this.$store.dispatch('GoLogin',this.user)\n      // .then((res) => {\n      //     // if(this.checked = true) {\n      //     //     localStorage.user = JSON.stringify(this.user)\n      //     // }\n      //     // if(res === undefined){\n      //     //     this.$router.push({path:'/userinfo'})\n      //     // }\n      //     console.log(\"a\" + res)\n      //     this.$router.push({path:'/'})\n      // })\n      this.$api.api.resetPassWord(this.userinfow).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"找回密码成功\"\n          });\n          this.$router.push({\n            path: \"/touser/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    register() {\n      this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"用户信息填写成功\"\n          });\n          this.$router.push({\n            path: \"/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.userinfo {\n  width: 100%;\n  height: 100%;\n  background-color: #e6e4e4;\n  .btn {\n    width: 400px;\n    height: 200px;\n    position: absolute;\n    left: 30%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -100px;\n  }\n  .form {\n    width: 400px;\n    height: 200px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -100px;\n    .title-name {\n      display: block;\n      margin-left: 10px;\n      padding-bottom: 10px;\n    }\n    .register-title {\n      margin-bottom: 20px;\n      text-align: center;\n      font-size: 25px;\n      color: rgb(58, 57, 57);\n    }\n    .el-input {\n      margin-bottom: 15px;\n    }\n    .btn-register {\n      margin: 10px 0;\n      width: 400px;\n    }\n    .gologin {\n      cursor: pointer;\n      color: rgb(17, 118, 233);\n    }\n  }\n}\n.avatar-uploader {\n  margin-left: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #000;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #000;\n  width: 78px;\n  height: 78px;\n  line-height: 78px;\n  text-align: center;\n  border: 1px dashed #000;\n}\n.avatar {\n  width: 78px;\n  height: 78px;\n  display: block;\n}\n.login-title {\n  margin-bottom: 20px;\n  text-align: center;\n  font-size: 25px;\n  color: rgb(58, 57, 57);\n}\n.el-input {\n  margin-bottom: 15px;\n}\n.btn-login {\n  margin: 10px 0;\n  width: 400px;\n}\n.login-foot {\n  cursor: pointer;\n  color: rgb(17, 118, 233);\n  float: right;\n}\n.goregister {\n  cursor: pointer;\n  color: rgb(17, 118, 233);\n}\n</style>\n\n\n"]}]}