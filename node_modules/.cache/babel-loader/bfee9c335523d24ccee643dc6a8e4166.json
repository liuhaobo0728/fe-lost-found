{"remainingRequest":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/babel-loader/lib/index.js!/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/liuhaobo/Desktop/fe-lost-found/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/liuhaobo/Desktop/fe-lost-found/src/views/user/user-center.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/liuhaobo/Desktop/fe-lost-found/src/views/user/user-center.vue","mtime":1557389346879},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  data: function data() {\n    return {\n      userinfow: {\n        userEmail: \"\",\n        passWord: \"\"\n      },\n      user: {\n        itemImg: \"\",\n        extraInfo: \"\",\n        userIcon: \"\",\n        userId: \"\",\n        userNick: \"\",\n        userPhone: \"\",\n        userScore: 0\n      },\n      imageUrl: \"\",\n      userinfo: true,\n      forshow: false,\n      filelist: {\n        file: null,\n        userId: 0\n      }\n    };\n  },\n  mounted: function mounted() {\n    this.user.userId = this.$store.getters.userid;\n  },\n  methods: {\n    previewFile: function previewFile() {\n      this.filelist.file = this.$refs.file.files[0];\n\n      if (this.filelist.file.size > 1024 * 1024 * 2) {\n        alert(\"图片大小不能超过 2MB!\");\n        return false;\n      } // 创建url\n\n\n      this.user.itemImg = window.URL.createObjectURL(this.filelist.file);\n    },\n    sendfood: function () {\n      var _sendfood = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee() {\n        var formdata;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.$api.api.goUserInfo(this.user).then(function (res) {\n                  if (res.data.state === 0) {}\n                });\n\n              case 2:\n                formdata = new FormData();\n                formdata.append(\"file\", this.filelist.file);\n                _context.next = 6;\n                return this.$api.api.uplodeItemImg(formdata).then(function (res) {\n                  if (res.data.state === 0) {\n                    alert(\"修改成功\");\n                  }\n                });\n\n              case 6:\n                this.$router.push({\n                  path: \"/\"\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function sendfood() {\n        return _sendfood.apply(this, arguments);\n      }\n\n      return sendfood;\n    }(),\n    forshowa: function forshowa() {\n      this.forshow = !this.forshow;\n      this.userinfo = !this.userinfo;\n    },\n    infoshow: function infoshow() {\n      this.forshow = !this.forshow;\n      this.userinfo = !this.userinfo;\n    },\n    login: function login() {\n      var _this = this;\n\n      // this.$store.dispatch('GoLogin',this.user)\n      // .then((res) => {\n      //     // if(this.checked = true) {\n      //     //     localStorage.user = JSON.stringify(this.user)\n      //     // }\n      //     // if(res === undefined){\n      //     //     this.$router.push({path:'/userinfo'})\n      //     // }\n      //     console.log(\"a\" + res)\n      //     this.$router.push({path:'/'})\n      // })\n      this.$api.api.resetPassWord(this.userinfow).then(function (res) {\n        if (res.data.state === 0) {\n          _this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"找回密码成功\"\n          });\n\n          _this.$router.push({\n            path: \"/touser/login\"\n          });\n        } else {\n          _this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    register: function register() {\n      var _this2 = this;\n\n      this.$api.api.goUserInfo(this.user).then(function (res) {\n        if (res.data.state === 0) {\n          _this2.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"用户信息填写成功\"\n          });\n\n          _this2.$router.push({\n            path: \"/login\"\n          });\n        } else {\n          _this2.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    }\n  }\n};",{"version":3,"sources":["user-center.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,SAAA,EAAA;AACA,QAAA,SAAA,EAAA,EADA;AAEA,QAAA,QAAA,EAAA;AAFA,OADA;AAKA,MAAA,IAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,SAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,MAAA,EAAA,EAJA;AAKA,QAAA,QAAA,EAAA,EALA;AAMA,QAAA,SAAA,EAAA,EANA;AAOA,QAAA,SAAA,EAAA;AAPA,OALA;AAcA,MAAA,QAAA,EAAA,EAdA;AAeA,MAAA,QAAA,EAAA,IAfA;AAgBA,MAAA,OAAA,EAAA,KAhBA;AAiBA,MAAA,QAAA,EAAA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA;AAFA;AAjBA,KAAA;AAsBA,GAxBA;AAyBA,EAAA,OAzBA,qBAyBA;AACA,SAAA,IAAA,CAAA,MAAA,GAAA,KAAA,MAAA,CAAA,OAAA,CAAA,MAAA;AACA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,KAAA,KAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA;;AACA,UAAA,KAAA,QAAA,CAAA,IAAA,CAAA,IAAA,GAAA,OAAA,IAAA,GAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,eAAA,CAAA;AACA,eAAA,KAAA;AACA,OALA,CAMA;;;AACA,WAAA,IAAA,CAAA,OAAA,GAAA,MAAA,CAAA,GAAA,CAAA,eAAA,CAAA,KAAA,QAAA,CAAA,IAAA,CAAA;AACA,KATA;AAUA,IAAA,QAVA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAWA,KAAA,IAAA,CAAA,GAAA,CAAA,UAAA,CAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA,CASA;AACA,iBAXA,CAXA;;AAAA;AAuBA,gBAAA,QAvBA,GAuBA,IAAA,QAAA,EAvBA;AAwBA,gBAAA,QAAA,CAAA,MAAA,CAAA,MAAA,EAAA,KAAA,QAAA,CAAA,IAAA;AAxBA;AAAA,uBAyBA,KAAA,IAAA,CAAA,GAAA,CAAA,aAAA,CAAA,QAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,sBAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,oBAAA,KAAA,CAAA,MAAA,CAAA;AACA;AACA,iBAJA,CAzBA;;AAAA;AA8BA,qBAAA,OAAA,CAAA,IAAA,CAAA;AACA,kBAAA,IAAA,EAAA;AADA,iBAAA;;AA9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAkCA,IAAA,QAlCA,sBAkCA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AACA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA;AACA,KArCA;AAsCA,IAAA,QAtCA,sBAsCA;AACA,WAAA,OAAA,GAAA,CAAA,KAAA,OAAA;AAEA,WAAA,QAAA,GAAA,CAAA,KAAA,QAAA;AACA,KA1CA;AA2CA,IAAA,KA3CA,mBA2CA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,aAAA,CAAA,KAAA,SAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA,IADA;AAEA,YAAA,SAAA,EAAA,KAFA;AAGA,YAAA,OAAA,EAAA;AAHA,WAAA;;AAKA,UAAA,KAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA;AADA,WAAA;AAGA,SATA,MASA;AACA,UAAA,KAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA,IADA;AAEA,YAAA,SAAA,EAAA,KAFA;AAGA,YAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAHA,WAAA;AAKA;AACA,OAjBA;AAkBA,KAzEA;AA0EA,IAAA,QA1EA,sBA0EA;AAAA;;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,UAAA,CAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,GAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA,IADA;AAEA,YAAA,SAAA,EAAA,KAFA;AAGA,YAAA,OAAA,EAAA;AAHA,WAAA;;AAKA,UAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AACA,YAAA,IAAA,EAAA;AADA,WAAA;AAGA,SATA,MASA;AACA,UAAA,MAAA,CAAA,OAAA,CAAA;AACA,YAAA,KAAA,EAAA,IADA;AAEA,YAAA,SAAA,EAAA,KAFA;AAGA,YAAA,OAAA,EAAA,GAAA,CAAA,IAAA,CAAA;AAHA,WAAA;AAKA;AACA,OAjBA;AAkBA;AA7FA;AA5BA,CAAA","sourcesContent":["<template>\n  <div class=\"userinfo\">\n    <div class=\"btn\">\n      <el-button type=\"text\" @click=\"infoshow\">信息修改</el-button>\n      <el-button type=\"text\" @click=\"forshowa\">重置密码</el-button>\n    </div>\n\n    <div class=\"form\" v-show=\"userinfo\">\n      <p class=\"register-title\">信息修改</p>\n      <div class=\"imgfile\">\n        <h3 class=\"filetitle\">请上传头像：</h3>\n        <input type=\"file\" @change=\"previewFile()\" ref=\"file\">\n      </div>\n      <div class=\"imageurl\">\n        <img\n          v-if=\"user.itemImg\"\n          :src=\"user.itemImg\"\n          width=\"200\"\n          height=\"200\"\n          alt=\"Image preview...\"\n        >\n      </div>\n      <br>\n      <span class=\"title-name\">请输入用户昵称</span>\n      <el-input v-model=\"user.userNick\" placeholder=\"请输入用户昵称\"/>\n      <span class=\"title-name\">请输入手机号</span>\n\n      <el-input v-model=\"user.userPhone\" placeholder=\"请输入手机号\"/>\n      <el-button class=\"btn-register\" type=\"success\" @click=\"sendfood\">保存</el-button>\n    </div>\n    <div class=\"form\" v-show=\"forshow\">\n      <p class=\"login-title\">重置密码</p>\n      <el-input v-model=\"userinfow.userEmail\" placeholder=\"请输入邮箱\"/>\n      <el-input v-model=\"userinfow.passWord\" type=\"password\" placeholder=\"请输入密码\"/>\n      <el-button class=\"btn-login\" type=\"success\" @click=\"login\">重置</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      userinfow: {\n        userEmail: \"\",\n        passWord: \"\"\n      },\n      user: {\n        itemImg: \"\",\n        extraInfo: \"\",\n        userIcon: \"\",\n        userId: \"\",\n        userNick: \"\",\n        userPhone: \"\",\n        userScore: 0\n      },\n      imageUrl: \"\",\n      userinfo: true,\n      forshow: false,\n      filelist: {\n        file: null,\n        userId: 0\n      }\n    };\n  },\n  mounted() {\n    this.user.userId = this.$store.getters.userid;\n  },\n  methods: {\n    previewFile() {\n      this.filelist.file = this.$refs.file.files[0];\n      if (this.filelist.file.size > 1024 * 1024 * 2) {\n        alert(\"图片大小不能超过 2MB!\");\n        return false;\n      }\n      // 创建url\n      this.user.itemImg = window.URL.createObjectURL(this.filelist.file);\n    },\n    async sendfood() {\n      await this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          // this.$notify({\n          //   title: \"成功\",\n          //   showClose: false,\n          //   message: \"用户信息修改成功\"\n          // });\n          // this.$router.push({\n          //   path: \"/\"\n          // });\n        }\n      });\n      const formdata = new FormData();\n      formdata.append(\"file\", this.filelist.file);\n      await this.$api.api.uplodeItemImg(formdata).then(res => {\n        if (res.data.state === 0) {\n          alert(\"修改成功\");\n        }\n      });\n      this.$router.push({\n        path: \"/\"\n      });\n    },\n    forshowa() {\n      this.forshow = !this.forshow;\n      this.userinfo = !this.userinfo;\n    },\n    infoshow() {\n      this.forshow = !this.forshow;\n\n      this.userinfo = !this.userinfo;\n    },\n    login() {\n      // this.$store.dispatch('GoLogin',this.user)\n      // .then((res) => {\n      //     // if(this.checked = true) {\n      //     //     localStorage.user = JSON.stringify(this.user)\n      //     // }\n      //     // if(res === undefined){\n      //     //     this.$router.push({path:'/userinfo'})\n      //     // }\n      //     console.log(\"a\" + res)\n      //     this.$router.push({path:'/'})\n      // })\n      this.$api.api.resetPassWord(this.userinfow).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"找回密码成功\"\n          });\n          this.$router.push({\n            path: \"/touser/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    },\n    register() {\n      this.$api.api.goUserInfo(this.user).then(res => {\n        if (res.data.state === 0) {\n          this.$notify({\n            title: \"成功\",\n            showClose: false,\n            message: \"用户信息填写成功\"\n          });\n          this.$router.push({\n            path: \"/login\"\n          });\n        } else {\n          this.$notify({\n            title: \"失败\",\n            showClose: false,\n            message: res.data.msg\n          });\n        }\n      });\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.userinfo {\n  width: 100%;\n  height: 100%;\n  background-color: #e6e4e4;\n  .btn {\n    width: 400px;\n    height: 200px;\n    position: absolute;\n    left: 30%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -100px;\n  }\n  .form {\n    width: 400px;\n    height: 200px;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    margin-left: -200px;\n    margin-top: -100px;\n    .title-name {\n      display: block;\n      margin-left: 10px;\n      padding-bottom: 10px;\n    }\n    .register-title {\n      margin-bottom: 20px;\n      text-align: center;\n      font-size: 25px;\n      color: rgb(58, 57, 57);\n    }\n    .el-input {\n      margin-bottom: 15px;\n    }\n    .btn-register {\n      margin: 10px 0;\n      width: 400px;\n    }\n    .gologin {\n      cursor: pointer;\n      color: rgb(17, 118, 233);\n    }\n  }\n}\n.avatar-uploader {\n  margin-left: 10px;\n}\n.avatar-uploader .el-upload {\n  border: 1px dashed #000;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.avatar-uploader .el-upload:hover {\n  border-color: #409eff;\n}\n.avatar-uploader-icon {\n  font-size: 28px;\n  color: #000;\n  width: 78px;\n  height: 78px;\n  line-height: 78px;\n  text-align: center;\n  border: 1px dashed #000;\n}\n.avatar {\n  width: 78px;\n  height: 78px;\n  display: block;\n}\n.login-title {\n  margin-bottom: 20px;\n  text-align: center;\n  font-size: 25px;\n  color: rgb(58, 57, 57);\n}\n.el-input {\n  margin-bottom: 15px;\n}\n.btn-login {\n  margin: 10px 0;\n  width: 400px;\n}\n.login-foot {\n  cursor: pointer;\n  color: rgb(17, 118, 233);\n  float: right;\n}\n.goregister {\n  cursor: pointer;\n  color: rgb(17, 118, 233);\n}\n</style>\n\n\n"],"sourceRoot":"src/views/user"}]}