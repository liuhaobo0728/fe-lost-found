{"remainingRequest":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/babel-loader/lib/index.js!/Users/liuhaobo/Desktop/fe-lost-found/src/store/modules/user.js","dependencies":[{"path":"/Users/liuhaobo/Desktop/fe-lost-found/src/store/modules/user.js","mtime":1557395895682},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _Promise from \"/Users/liuhaobo/Desktop/fe-lost-found/node_modules/@babel/runtime-corejs2/core-js/promise\";\nimport api from '../../utils/api/api';\nimport { encrypt } from '../../../ip';\nvar user = {\n  state: {\n    token: '',\n    userid: '',\n    id: '',\n    nick: ''\n  },\n  mutations: {\n    SET_TOKEN: function SET_TOKEN(state, token) {\n      state.token = token;\n    },\n    SET_USERID: function SET_USERID(state, userid) {\n      state.userid = userid;\n    },\n    SET_ID: function SET_ID(state, id) {\n      state.id = id;\n    },\n    SET_NICK: function SET_NICK(state, nick) {\n      state.nick = nick;\n    },\n    RESER_USER: function RESER_USER(state) {\n      state.token = '';\n      state.id = '';\n      state.nick = '';\n    }\n  },\n  actions: {\n    // 登录\n    GoLogin: function GoLogin(_ref, loginForm) {\n      var commit = _ref.commit;\n      return new _Promise(function (resolve, reject) {\n        var user = {\n          userEmail: loginForm.userEmail,\n          passWord: loginForm.passWord\n        };\n        api.goLogin(user).then(function (res) {\n          if (res.data.state === -307) {\n            // commit('SET_USERID', res.data.info || '')\n            resolve(res);\n            return;\n          }\n\n          if (res.data.state === -308) {\n            commit('SET_USERID', res.data.info || '');\n            resolve(res);\n            return;\n          }\n\n          var data = res.data.info;\n          commit('SET_TOKEN', data.token || '');\n          commit('SET_USERID', data.userId || '');\n          commit('SET_NICK', data.userNick || '');\n          resolve(res);\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n    },\n    GoOut: function GoOut(_ref2) {\n      var commit = _ref2.commit;\n      return new _Promise(function (resolve) {\n        localStorage.removeItem('vuex');\n        commit('RESER_USER');\n        resolve();\n      });\n    },\n    GoRegister: function GoRegister(_ref3, registerdata) {\n      var commit = _ref3.commit;\n      return new _Promise(function (resolve, reject) {\n        var user = {\n          userEmail: registerdata.userEmail,\n          passWord: registerdata.passWord\n        };\n        api.goRegister(user).then(function (res) {\n          if (res) {\n            if (res.data.state === 0) {\n              commit('SET_USERID', res.data.info || '');\n            }\n\n            resolve(res);\n          }\n        }).catch(function (err) {\n          reject(err);\n        });\n      });\n    }\n  }\n};\nexport default user;",{"version":3,"sources":["/Users/liuhaobo/Desktop/fe-lost-found/src/store/modules/user.js"],"names":["api","encrypt","user","state","token","userid","id","nick","mutations","SET_TOKEN","SET_USERID","SET_ID","SET_NICK","RESER_USER","actions","GoLogin","loginForm","commit","resolve","reject","userEmail","passWord","goLogin","then","res","data","info","userId","userNick","catch","err","GoOut","localStorage","removeItem","GoRegister","registerdata","goRegister"],"mappings":"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","sourcesContent":["import api from '../../utils/api/api'\n\nimport { encrypt } from '../../../ip'\n\nconst user = {\n    state: {\n        token: '',\n        userid: '',\n        id: '',\n        nick: ''\n    },\n    mutations: {\n        SET_TOKEN(state, token) {\n            state.token = token\n        },\n        SET_USERID(state, userid) {\n            state.userid = userid\n        },\n        SET_ID(state, id) {\n            state.id = id\n        },\n        SET_NICK(state, nick) {\n            state.nick = nick\n        },\n        RESER_USER(state) {\n            state.token = ''\n            state.id = ''\n            state.nick = ''\n        }\n    },\n    actions: {\n        // 登录\n        GoLogin({\n            commit\n        }, loginForm) {\n            return new Promise((resolve, reject) => {\n                const user = {\n                    userEmail: loginForm.userEmail,\n                    passWord: loginForm.passWord\n                }\n                api.goLogin(user)\n                    .then(res => {\n                        if (res.data.state === -307) {\n                            // commit('SET_USERID', res.data.info || '')\n                            resolve(res);\n                            return;\n                        }\n                        if (res.data.state === -308) {\n                            commit('SET_USERID', res.data.info || '')\n                            resolve(res);\n                            return;\n                        }\n                        const data = res.data.info\n                        commit('SET_TOKEN', data.token || '')\n                        commit('SET_USERID', data.userId || '')\n                        commit('SET_NICK', data.userNick || '')\n\n                        resolve(res)\n                    }).catch(err => {\n                        reject(err)\n                    })\n            })\n        },\n        GoOut({\n            commit\n        }) {\n            return new Promise(resolve => {\n                localStorage.removeItem('vuex')\n                commit('RESER_USER')\n                resolve()\n            })\n        },\n        GoRegister({\n            commit\n        }, registerdata) {\n            return new Promise((resolve, reject) => {\n                const user = {\n                    userEmail: registerdata.userEmail,\n                    passWord: registerdata.passWord\n                }\n                api.goRegister(user)\n                    .then(res => {\n                        if (res) {\n                            if (res.data.state === 0) {\n                                commit('SET_USERID', res.data.info || '')\n                            }\n                            resolve(res)\n                        }\n                    }).catch(err => {\n                        reject(err)\n                    })\n            })\n        }\n    }\n}\n\nexport default user;"]}]}